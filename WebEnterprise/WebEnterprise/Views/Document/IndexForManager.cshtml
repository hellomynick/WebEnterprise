@using WebEnterprise.ViewModels.Common;
@model PagedResult<WebEnterprise.ViewModels.Catalog.Document.DocumentsVm>
@{
    ViewData["Title"] = "User Document";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section Scripts{
    <script>
        setTimeout(function () {
            $('#msgAlert').fadeOut('slow');
        }, 2000);
    </script>
}
<div class="grid wide">
    <div class="row">
        <!-- sidebar start -->
        <div class="col l-3 m-0 c-0" style="margin: 0;">
            <div class="sidebar">
                <h4>Faculties</h4>
                <ul>
                    <li id="1" class="category-sidebar" data-id="data-all">All</li>
                    <li id="2" class="category-sidebar" data-id="data-design">Design</li>
                    <li id="3" class="category-sidebar" data-id="data-it">Information Technology</li>
                    <li id="4" class="category-sidebar" data-id="data-business">Business</li>
                    <li id="5" class="category-sidebar" data-id="data-tourism">Tourism</li>
                    <li id="6" class="category-sidebar" data-id="data-chart">Chart</li>
                </ul>
            </div>
        </div>
        <!-- sidebar end -->
        <!-- content container start-->
        <div class="col l-9 m-12 c-12">
            <div class="content-container-box">
                <div class="header-box-content">
                    <div class="nameFaculty">
                        <span> Selecting:</span> <span id="selectCate"></span>
                    </div>
                </div>
                <div class="mobile-sidebar">
                    <ul class="mSidebar-list">
                        <li id="1" class="mSidebar-item" data-id="data-all">All</li>
                        <li id="2" class="mSidebar-item" data-id="data-design">Design</li>
                        <li id="3" class="mSidebar-item" data-id="data-it">Information Technology</li>
                        <li id="4" class="mSidebar-item" data-id="data-business">Business</li>
                        <li id="5" class="mSidebar-item" data-id="data-tourism">Tourism</li>
                        <li id="6" class="mSidebar-item" data-id="data-chart">Chart</li>
                    </ul>
                </div>
                <!-- data container start-->
                @foreach (var item in Model.Items)
                {
                    <div class="content-container-data" id="data-all">

                        <div class="row">
                            <div class="col l-4 c-12 m-4">
                                <div class="dataBox">
                                    <h4>Number of articles</h4>
                                    <span>@Html.DisplayFor(modelitem => item.ViewCount)</span>
                                </div>
                            </div>
                            <div class="col l-4 c-12 m-4">
                                <div class="dataBox">
                                    <h4>Articles approved</h4>
                                    <span>@Html.DisplayFor(modelitem => item.TotalTrue)</span>
                                </div>
                            </div>
                            <div class="col l-4 c-12 m-4">
                                <div class="dataBox">
                                    <h4>Articles waiting</h4>
                                    <span>@Html.DisplayFor(modelitem => item.TotalFalse)</span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <fieldset style="margin-left:12px" class="col l-5 c-12">
                                <legend>Download documents (.zip)</legend>
                                <form action="." method="POST">
                                    <input type="text" data-toggle="datepicker" data-date-format="yyyy.mm"
                                           placeholder="Pick month">
                                    <button type="submit">@Html.ActionLink("Download", "DownloadFileZip")</button>
                                </form>
                            </fieldset>
                        </div>
                    </div>
                }
                <div class="content-container-data" id="data-design">
                    @foreach (var item in Model.Items)
                    {
                        <div class="row">
                            <div class="col l-4 c-12 m-4">
                                <div class="dataBox">
                                    <h4>Number of articles</h4>
                                    <span>@Html.DisplayFor(modelitem => item.TotalDesign)</span>
                                </div>
                            </div>
                            <div class="col l-4 c-12 m-4">
                                <div class="dataBox">
                                    <h4>Articles approved</h4>
                                    <span>@Html.DisplayFor(modelitem => item.TotalDesignTrue)</span>
                                </div>
                            </div>
                            <div class="col l-4 c-12 m-4">
                                <div class="dataBox">
                                    <h4>Articles waiting</h4>
                                    <span>@Html.DisplayFor(modelitem => item.TotalDesignFalse)</span>
                                </div>
                            </div>
                        </div>
                    }
                    <div class="row">
                        <fieldset style="margin-left:12px" class="col l-5 c-12">
                            <legend>Download documents (.zip)</legend>
                            <form action="." method="POST">
                                <input type="text" data-toggle="datepicker" data-date-format="yyyy.mm"
                                       placeholder="Pick month">
                                <button type="submit">Download</button>
                            </form>
                        </fieldset>
                    </div>
                </div>
                <div class="content-container-data" id="data-it">
                    @foreach (var item in Model.Items)
                    {
                        <div class="row">
                            <div class="col l-4 c-12 m-4">
                                <div class="dataBox">
                                    <h4>Number of articles</h4>
                                    <span>@Html.DisplayFor(modelitem => item.TotalIT)</span>
                                </div>
                            </div>
                            <div class="col l-4 c-12 m-4">
                                <div class="dataBox">
                                    <h4>Articles approved</h4>
                                    <span>@Html.DisplayFor(modelitem => item.TotalITTrue)</span>
                                </div>
                            </div>
                            <div class="col l-4 c-12 m-4">
                                <div class="dataBox">
                                    <h4>Articles waiting</h4>
                                    <span>@Html.DisplayFor(modelitem => item.TotalITFalse)</span>
                                </div>
                            </div>
                        </div>
                    }
                    <div class="row">
                        <fieldset style="margin-left:12px" class="col l-5 c-12">
                            <legend>Download documents (.zip)</legend>
                            <form action="." method="POST">
                                <input type="text" data-toggle="datepicker" data-date-format="yyyy.mm"
                                       placeholder="Pick month">
                                <button type="submit">Download</button>
                            </form>
                        </fieldset>
                    </div>
                </div>
                <div class="content-container-data" id="data-business">
                    @foreach (var item in Model.Items)
                    {
                        <div class="row">
                            <div class="col l-4 c-12 m-4">
                                <div class="dataBox">
                                    <h4>Number of articles</h4>
                                    <span>@Html.DisplayFor(modelitem => item.TotalBusiness)</span>
                                </div>
                            </div>
                            <div class="col l-4 c-12 m-4">
                                <div class="dataBox">
                                    <h4>Articles approved</h4>
                                    <span>@Html.DisplayFor(modelitem => item.TotalBusinessTrue)</span>
                                </div>
                            </div>
                            <div class="col l-4 c-12 m-4">
                                <div class="dataBox">
                                    <h4>Articles waiting</h4>
                                    <span>@Html.DisplayFor(modelitem => item.TotalBusinessFalse)</span>
                                </div>
                            </div>
                        </div>
                    }
                    <div class="row">
                        <fieldset style="margin-left:12px" class="col l-5 c-12">
                            <legend>Download documents (.zip)</legend>
                            <form action="." method="POST">
                                <input type="text" data-toggle="datepicker" data-date-format="yyyy.mm"
                                       placeholder="Pick month">
                                <button type="submit">Download</button>
                            </form>
                        </fieldset>
                    </div>
                </div>
                <div class="content-container-data" id="data-tourism">
                    @foreach (var item in Model.Items)
                    {
                        <div class="row">
                            <div class="col l-4 c-12 m-4">
                                <div class="dataBox">
                                    <h4>Number of articles</h4>
                                    <span>@Html.DisplayFor(modelitem => item.TotalToursim)</span>
                                </div>
                            </div>
                            <div class="col l-4 c-12 m-4">
                                <div class="dataBox">
                                    <h4>Articles approved</h4>
                                    <span>@Html.DisplayFor(modelitem => item.TotalToursimTrue)</span>
                                </div>
                            </div>
                            <div class="col l-4 c-12 m-4">
                                <div class="dataBox">
                                    <h4>Articles waiting</h4>
                                    <span>@Html.DisplayFor(modelitem => item.TotalToursimFalse)</span>
                                </div>
                            </div>
                        </div>
                    }
                    <div class="row">
                        <fieldset style="margin-left:12px" class="col l-5 c-12">
                            <legend>Download documents (.zip)</legend>
                            <form action="." method="POST">
                                <input type="text" data-toggle="datepicker" data-date-format="yyyy.mm"
                                       placeholder="Pick month">
                                <button type="submit">Download</button>
                            </form>
                        </fieldset>
                    </div>
                </div>
                <div class="content-container-data" id="data-chart">

                    <div class="row">
                        <div class="chart-wrap">
                            <div id="piechart"></div>
                        </div>
                    </div>
                </div>
                <!-- data container end -->
            </div>
        </div>
        <!-- content container end-->
    </div>
</div>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
@foreach (var items in Model.Items)
{
    <script>
    google.charts.load('current', { 'packages': ['corechart'] });
    google.charts.setOnLoadCallback(drawChart);
    // google.load("visualization", "1", {packages:["corechart"]});
    // google.setOnLoadCallback(drawChart);
    $('[data-toggle="datepicker"]').datepicker({
        // options
        format: 'mm/yyyy'
    });

    validator({
        form: '#form-login',
        errorSelector: '.form-message',
        rules: [
            validator.isRequired('#username'),
            validator.minLength('#password', 6),
        ]
    });

    function drawChart() {
        var data = google.visualization.arrayToDataTable([

            ['Task', 'documents'],
            ['IT', @items.TotalIT],
            ['Business', @items.TotalBusiness],
            ['Tourism', @items.TotalToursim],
            ['Design', @items.TotalDesign]
        ]);
        var options = {
            title: 'Percentage of contributions by each Faculty for academic year',
            width: '100%',
            height: '100%'
        };
        var chart = new google.visualization.PieChart(document.getElementById('piechart'));

        chart.draw(data, options);
    };
    </script>
}